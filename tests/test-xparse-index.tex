\documentclass{article}
\usepackage{imakeidx}
\usepackage{xparse}

\makeindex

\NewDocumentCommand\afun{v}{%
  #1 \index{Book class!\ifun{#1}}%
}
\NewDocumentCommand{\ifun}{v}{\texttt{#1}}

\begin{document}

\afun{object.method.blah}

\afun{object.method2_.blah}

\printindex

\end{document}